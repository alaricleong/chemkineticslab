<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>O-Level Chemistry Explorer (6092)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
        }

        .grid-wrapper {
            display: grid;
            grid-template-columns: 20px repeat(18, minmax(32px, 1fr));
            gap: 1px;
            padding: 2px;
        }

        .element-card {
            aspect-ratio: 1 / 1.1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 0;
            border-radius: 1px;
            border: 1px solid rgba(0,0,0,0.08);
            background: white;
            position: relative;
        }

        .clickable {
            cursor: pointer;
            transition: transform 0.1s, box-shadow 0.1s;
        }

        .clickable:hover {
            transform: scale(1.2);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 50;
        }

        /* Category Colors */
        .c-alkali { background-color: #fee2e2; color: #991b1b; }
        .c-alkaline { background-color: #ffedd5; color: #9a3412; }
        .c-transition { background-color: #f1f5f9; color: #1e293b; }
        .c-metalloid { background-color: #ccfbf1; color: #115e59; }
        .c-nonmetal { background-color: #e0e7ff; color: #3730a3; }
        .c-halogen { background-color: #fdf2f8; color: #9d174d; }
        .c-noble { background-color: #f8fafc; color: #64748b; }
        .c-disabled { background-color: #f9fafb; color: #cbd5e1; cursor: default; }

        /* Comparison Styles */
        .comparison-container {
            display: flex;
            overflow-x: auto;
            gap: 0.5rem;
            padding: 0.25rem 0;
            min-height: 260px;
            scroll-behavior: smooth;
        }

        .comparison-card {
            min-width: 240px;
            background: white;
            border-radius: 6px;
            box-shadow: 0 1px 4px rgba(0,0,0,0.05);
            border: 1px solid #e2e8f0;
            flex-shrink: 0;
            height: fit-content;
        }

        .toggle-btn {
            font-size: 7px;
            font-weight: 800;
            padding: 2px 8px;
            border-radius: 4px;
            transition: all 0.2s;
        }
        .toggle-btn.active {
            background-color: #3b82f6;
            color: white;
        }
        .toggle-btn.inactive {
            background-color: #f1f5f9;
            color: #64748b;
        }

        .orbital-box {
            width: 12px;
            height: 12px;
            border: 1px solid #334155;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background: white;
            font-size: 0.5rem;
        }
    </style>
</head>
<body class="p-1 md:p-2">

    <main class="max-w-[1400px] mx-auto">
        <!-- Periodic Table Section -->
        <div class="bg-white p-1 rounded shadow-sm border border-slate-200 overflow-x-auto mb-4">
            <div class="grid-wrapper" id="tableGrid"></div>
        </div>

        <!-- Comparison Section -->
        <section>
            <div class="flex justify-between items-center mb-1 px-1">
                <h2 class="text-[10px] font-black text-slate-800 uppercase tracking-widest flex items-center gap-2">
                    Analysis Deck
                    <span id="counter" class="bg-blue-600 text-white px-1.5 py-0.25 rounded">0</span>
                </h2>
                <button onclick="clearComparison()" class="text-[9px] font-bold text-red-500 hover:text-red-700 transition-colors">CLEAR ALL</button>
            </div>
            <div id="comparisonContainer" class="comparison-container">
                <div class="flex flex-col items-center justify-center w-full border-2 border-dashed border-slate-200 rounded-lg text-slate-400 py-10 text-[11px] text-center px-4">
                    Click elements above to compare properties.<br>
                    Add the same element twice to see <strong>Atom vs Ion</strong> side-by-side.
                </div>
            </div>
        </section>
    </main>

    <script>
        const elementsData = {
            1: { symbol: 'H', name: 'Hydrogen', nucleon: 1, p: 1, e: 1, n: 0, config: [1], ionConfig: [], ionLabel: 'H⁺', ionCharge: '+', type: 'nonmetal' },
            2: { symbol: 'He', name: 'Helium', nucleon: 4, p: 2, e: 2, n: 2, config: [2], ionConfig: [2], ionLabel: '-', ionCharge: '', type: 'noble' },
            3: { symbol: 'Li', name: 'Lithium', nucleon: 7, p: 3, e: 3, n: 4, config: [2, 1], ionConfig: [2], ionLabel: 'Li⁺', ionCharge: '+', type: 'alkali' },
            4: { symbol: 'Be', name: 'Beryllium', nucleon: 9, p: 4, e: 4, n: 5, config: [2, 2], ionConfig: [2], ionLabel: 'Be²⁺', ionCharge: '2+', type: 'alkaline' },
            5: { symbol: 'B', name: 'Boron', nucleon: 11, p: 5, e: 5, n: 6, config: [2, 3], ionConfig: [2], ionLabel: 'B³⁺', ionCharge: '3+', type: 'metalloid' },
            6: { symbol: 'C', name: 'Carbon', nucleon: 12, p: 6, e: 6, n: 6, config: [2, 4], ionConfig: [2, 4], ionLabel: '-', ionCharge: '', type: 'nonmetal' },
            7: { symbol: 'N', name: 'Nitrogen', nucleon: 14, p: 7, e: 7, n: 7, config: [2, 5], ionConfig: [2, 8], ionLabel: 'N³⁻', ionCharge: '3-', type: 'nonmetal' },
            8: { symbol: 'O', name: 'Oxygen', nucleon: 16, p: 8, e: 8, n: 8, config: [2, 6], ionConfig: [2, 8], ionLabel: 'O²⁻', ionCharge: '2-', type: 'nonmetal' },
            9: { symbol: 'F', name: 'Fluorine', nucleon: 19, p: 9, e: 9, n: 10, config: [2, 7], ionConfig: [2, 8], ionLabel: 'F⁻', ionCharge: '-', type: 'halogen' },
            10: { symbol: 'Ne', name: 'Neon', nucleon: 20, p: 10, e: 10, n: 10, config: [2, 8], ionConfig: [2, 8], ionLabel: '-', ionCharge: '', type: 'noble' },
            11: { symbol: 'Na', name: 'Sodium', nucleon: 23, p: 11, e: 11, n: 12, config: [2, 8, 1], ionConfig: [2, 8], ionLabel: 'Na⁺', ionCharge: '+', type: 'alkali' },
            12: { symbol: 'Mg', name: 'Magnesium', nucleon: 24, p: 12, e: 12, n: 12, config: [2, 8, 2], ionConfig: [2, 8], ionLabel: 'Mg²⁺', ionCharge: '2+', type: 'alkaline' },
            13: { symbol: 'Al', name: 'Aluminium', nucleon: 27, p: 13, e: 13, n: 14, config: [2, 8, 3], ionConfig: [2, 8], ionLabel: 'Al³⁺', ionCharge: '3+', type: 'transition' },
            14: { symbol: 'Si', name: 'Silicon', nucleon: 28, p: 14, e: 14, n: 14, config: [2, 8, 4], ionConfig: [2, 8, 4], ionLabel: '-', ionCharge: '', type: 'metalloid' },
            15: { symbol: 'P', name: 'Phosphorus', nucleon: 31, p: 15, e: 15, n: 16, config: [2, 8, 5], ionConfig: [2, 8, 8], ionLabel: 'P³⁻', ionCharge: '3-', type: 'nonmetal' },
            16: { symbol: 'S', name: 'Sulfur', nucleon: 32, p: 16, e: 16, n: 16, config: [2, 8, 6], ionConfig: [2, 8, 8], ionLabel: 'S²⁻', ionCharge: '2-', type: 'nonmetal' },
            17: { symbol: 'Cl', name: 'Chlorine', nucleon: 35.5, p: 17, e: 17, n: 18, config: [2, 8, 7], ionConfig: [2, 8, 8], ionLabel: 'Cl⁻', ionCharge: '-', type: 'halogen' },
            18: { symbol: 'Ar', name: 'Argon', nucleon: 40, p: 18, e: 18, n: 22, config: [2, 8, 8], ionConfig: [2, 8, 8], ionLabel: '-', ionCharge: '', type: 'noble' },
            19: { symbol: 'K', name: 'Potassium', nucleon: 39, p: 19, e: 19, n: 20, config: [2, 8, 8, 1], ionConfig: [2, 8, 8], ionLabel: 'K⁺', ionCharge: '+', type: 'alkali' },
            20: { symbol: 'Ca', name: 'Calcium', nucleon: 40, p: 20, e: 20, n: 20, config: [2, 8, 8, 2], ionConfig: [2, 8, 8], ionLabel: 'Ca²⁺', ionCharge: '2+', type: 'alkaline' },
            26: { symbol: 'Fe', name: 'Iron', nucleon: 56, p: 26, e: 26, n: 30, config: [2, 8, 14, 2], ionConfig: [2, 8, 14], ionLabel: 'Fe²⁺', ionCharge: '2+', type: 'transition' },
            29: { symbol: 'Cu', name: 'Copper', nucleon: 64, p: 29, e: 29, n: 35, config: [2, 8, 18, 1], ionConfig: [2, 8, 18], ionLabel: 'Cu⁺', ionCharge: '+', type: 'transition' },
            30: { symbol: 'Zn', name: 'Zinc', nucleon: 65, p: 30, e: 30, n: 35, config: [2, 8, 18, 2], ionConfig: [2, 8, 18], ionLabel: 'Zn²⁺', ionCharge: '2+', type: 'transition' },
            47: { symbol: 'Ag', name: 'Silver', nucleon: 108, p: 47, e: 47, n: 61, config: [2, 8, 18, 18, 1], ionConfig: [2, 8, 18, 18], ionLabel: 'Ag⁺', ionCharge: '+', type: 'transition' }
        };

        const fullTableData = {
            21:'Sc', 22:'Ti', 23:'V', 24:'Cr', 25:'Mn', 27:'Co', 28:'Ni', 31:'Ga', 32:'Ge', 33:'As', 34:'Se', 35:'Br', 36:'Kr',
            37:'Rb', 38:'Sr', 39:'Y', 40:'Zr', 41:'Nb', 42:'Mo', 43:'Tc', 44:'Ru', 45:'Rh', 46:'Pd', 48:'Cd', 49:'In', 50:'Sn', 51:'Sb', 52:'Te', 53:'I', 54:'Xe',
            55:'Cs', 56:'Ba', 72:'Hf', 73:'Ta', 74:'W', 75:'Re', 76:'Os', 77:'Ir', 78:'Pt', 79:'Au', 80:'Hg', 81:'Tl', 82:'Pb', 83:'Bi', 84:'Po', 85:'At', 86:'Rn',
            87:'Fr', 88:'Ra', 104:'Rf', 105:'Db', 106:'Sg', 107:'Bh', 108:'Hs', 109:'Mt', 110:'Ds', 111:'Rg', 112:'Cn', 113:'Nh', 114:'Fl', 115:'Mc', 116:'Lv', 117:'Ts', 118:'Og'
        };

        const gridMap = [
            [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2],
            [3, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 5, 6, 7, 8, 9, 10],
            [11, 12, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 13, 14, 15, 16, 17, 18],
            [19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36],
            [37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54],
            [55, 56, 0, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86],
            [87, 88, 0, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118]
        ];

        let comparisonList = [];

        function renderTable() {
            const grid = document.getElementById('tableGrid');
            grid.innerHTML = '';
            
            // Render Group Labels
            grid.appendChild(document.createElement('div'));
            for(let i=1; i<=18; i++) {
                const label = document.createElement('div');
                label.className = 'text-center text-[7px] font-black text-slate-400 pb-0.5 cursor-pointer hover:text-blue-600 transition-colors';
                label.innerText = i;
                label.onclick = () => showGroupTrend(i);
                grid.appendChild(label);
            }

            // Render Rows
            gridMap.forEach((row, rIdx) => {
                // Period Label
                const pLabel = document.createElement('div');
                pLabel.className = 'flex items-center justify-center font-black text-slate-400 text-[8px] cursor-pointer hover:text-blue-600 transition-colors';
                pLabel.innerText = rIdx + 1;
                pLabel.onclick = () => showPeriodTrend(rIdx + 1);
                grid.appendChild(pLabel);

                row.forEach(z => {
                    const cell = document.createElement('div');
                    if (z === 0) {
                        cell.className = 'opacity-0 pointer-events-none';
                    } else {
                        const el = elementsData[z];
                        if (el) {
                            cell.className = `element-card c-${el.type} clickable`;
                            cell.innerHTML = `
                                <span class="absolute top-0.5 left-0.5 text-[5px] font-bold leading-none">${el.nucleon}</span>
                                <strong class="text-[12px] font-black leading-tight">${el.symbol}</strong>
                                <span class="absolute bottom-0.5 right-0.5 text-[5px] font-bold opacity-60 leading-none">${z}</span>
                            `;
                            cell.onclick = () => addComparison(z);
                        } else {
                            const symbol = fullTableData[z] || '?';
                            cell.className = `element-card c-disabled`;
                            cell.innerHTML = `<strong class="text-[10px] font-bold leading-none opacity-40">${symbol}</strong>`;
                        }
                    }
                    grid.appendChild(cell);
                });
            });
        }

        function addComparison(z) {
            const count = comparisonList.filter(item => item.z === z).length;
            if (count >= 2) return; 

            const newItem = {
                z: z,
                id: Date.now() + Math.random(),
                mode: count === 0 ? 'atom' : 'ion'
            };
            
            comparisonList.unshift(newItem);
            updateUI();
        }

        function toggleMode(id, mode) {
            const item = comparisonList.find(i => i.id === id);
            if (item) {
                item.mode = mode;
                updateUI();
            }
        }

        function removeComparison(id) {
            comparisonList = comparisonList.filter(item => item.id !== id);
            updateUI();
        }

        function clearComparison() {
            comparisonList = [];
            updateUI();
        }

        function updateUI() {
            const container = document.getElementById('comparisonContainer');
            document.getElementById('counter').innerText = comparisonList.length;
            
            if (comparisonList.length === 0) {
                container.innerHTML = `<div class="flex flex-col items-center justify-center w-full border-2 border-dashed border-slate-200 rounded-lg text-slate-400 py-10 text-[11px] text-center px-4">Click elements above to compare properties.<br>Add the same element twice to see <strong>Atom vs Ion</strong> side-by-side.</div>`;
                return;
            }

            container.innerHTML = comparisonList.map(item => {
                const z = item.z;
                const el = elementsData[z];
                const mode = item.mode;
                const id = item.id;
                const isTransition = [26, 29, 30, 47].includes(z);
                const currentConfig = (mode === 'ion' && el.ionConfig.length > 0) ? el.ionConfig : el.config;
                const currentCharge = (mode === 'ion' && el.ionCharge) ? el.ionCharge : '';
                const atomConfig = el.config;
                
                return `
                    <div class="comparison-card">
                        <div class="px-2 py-1 bg-slate-50 border-b border-slate-100 flex justify-between items-center">
                            <span class="text-[7px] font-black text-slate-500 uppercase tracking-wider">${el.name}</span>
                            <div class="flex gap-1">
                                <button onclick="toggleMode(${id}, 'atom')" class="toggle-btn ${mode === 'atom' ? 'active' : 'inactive'}">ATOM</button>
                                <button onclick="toggleMode(${id}, 'ion')" class="toggle-btn ${mode === 'ion' ? 'active' : 'inactive'}">ION</button>
                                <button onclick="removeComparison(${id})" class="ml-1 text-slate-300 hover:text-red-500 transition-colors">
                                    <svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                                </button>
                            </div>
                        </div>
                        <div class="p-2">
                            <div class="flex items-center justify-between gap-2 mb-2 bg-slate-50 px-2 py-1 rounded border border-slate-100">
                                <div class="flex items-center gap-2">
                                    <div class="flex flex-col items-center leading-none">
                                        <span class="text-[8px] font-bold text-blue-500">${el.nucleon}</span>
                                        <h3 class="text-xl font-black text-slate-900">${el.symbol}</h3>
                                        <span class="text-[8px] font-bold text-slate-400">${z}</span>
                                    </div>
                                    <div class="h-6 w-[1px] bg-slate-200"></div>
                                    <div class="text-[9px] font-black text-indigo-600">${mode === 'ion' ? el.ionLabel : 'Neutral'}</div>
                                </div>
                                <div class="text-[8px] font-bold text-right leading-tight">
                                    <div class="text-slate-400">P: <span class="text-slate-900">${el.p}</span></div>
                                    <div class="text-slate-400">E: <span class="text-slate-900">${mode === 'ion' ? currentConfig.reduce((a, b) => a + b, 0) : el.e}</span></div>
                                    <div class="text-slate-400">N: <span class="text-slate-900">${el.n}</span></div>
                                </div>
                            </div>
                            
                            ${(!isTransition || (isTransition && mode === 'ion')) ? `
                            <div class="mb-3">
                                <div class="flex justify-between items-center mb-1">
                                    <p class="text-[7px] font-black text-slate-400 uppercase tracking-tighter">${mode === 'ion' ? 'Ionic Structure' : 'Atomic Structure'}</p>
                                    <span class="text-[8px] font-mono font-black text-blue-600">${currentConfig.join('.')}</span>
                                </div>
                                <div class="flex justify-center bg-slate-50 rounded py-2 border border-slate-100">
                                    ${drawDotCross(currentConfig, 120, el.symbol, currentCharge, mode === 'ion' ? atomConfig : null)}
                                </div>
                            </div>
                            ` : `
                            <div class="mb-3 p-3 bg-slate-50 rounded border border-slate-100 text-center">
                                <p class="text-[8px] font-bold text-slate-500 mb-1">Electronic Configuration</p>
                                <p class="text-[10px] font-mono font-black text-slate-800">${el.config.join('.')}</p>
                            </div>
                            `}

                            <div>
                                <p class="text-[7px] font-black text-slate-400 uppercase tracking-tighter mb-1.5">Orbitals</p>
                                <div class="flex flex-wrap gap-x-2 gap-y-1">
                                    ${renderOrbitalBoxes(el, mode)}
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function drawDotCross(config, size = 100, symbol = "?", charge = "", originalConfig = null) {
            const drawCenter = size / 2;
            let circles = '';
            let graphics = '';
            
            const maxRings = config.length;
            const ringSpacing = size * 0.09;
            const firstRingRadius = size * 0.16;
            const outerShellRadius = firstRingRadius + ((maxRings - 1) * ringSpacing);
            
            const scaleFactor = charge ? 0.75 : 1.0;
            const effectiveCenter = drawCenter;

            config.forEach((count, ringIdx) => {
                const radius = (firstRingRadius + (ringIdx * ringSpacing)) * scaleFactor;
                circles += `<circle cx="${effectiveCenter}" cy="${effectiveCenter}" r="${radius}" fill="none" stroke="#cbd5e1" stroke-width="1" />`;
                
                const baseAngles = [-90, 0, 90, 180]; 
                let originalCount = originalConfig && originalConfig[ringIdx] !== undefined ? originalConfig[ringIdx] : count;

                for (let i = 0; i < count; i++) {
                    const quadrant = i % 4;
                    const isPair = i >= 4 || (ringIdx === 0 && i === 1);
                    const offset = isPair ? (ringIdx === 0 ? 180 : 8) : 0;
                    const angle = baseAngles[quadrant] + offset;
                    const rad = angle * (Math.PI / 180);
                    const x = effectiveCenter + radius * Math.cos(rad);
                    const y = effectiveCenter + radius * Math.sin(rad);

                    if (originalConfig && i >= originalCount) {
                        const s = size * 0.025;
                        graphics += `<path d="M ${x-s} ${y-s} L ${x+s} ${y+s} M ${x+s} ${y-s} L ${x-s} ${y+s}" stroke="#ef4444" stroke-width="2" />`;
                    } else {
                        graphics += `<circle cx="${x}" cy="${y}" r="${size*0.022}" fill="#3b82f6" />`;
                    }
                }
            });

            let bracketUI = '';
            if (charge) {
                const bracketRadius = outerShellRadius * scaleFactor + (size * 0.06);
                const leftX = effectiveCenter - bracketRadius;
                const rightX = effectiveCenter + bracketRadius;
                const topY = effectiveCenter - bracketRadius;
                const bottomY = effectiveCenter + bracketRadius;
                const bracketWidth = size * 0.05;

                bracketUI = `
                    <g stroke="#94a3b8" stroke-width="1.5" fill="none">
                        <path d="M ${leftX + bracketWidth} ${topY} L ${leftX} ${topY} L ${leftX} ${bottomY} L ${leftX + bracketWidth} ${bottomY}" />
                        <path d="M ${rightX - bracketWidth} ${topY} L ${rightX} ${topY} L ${rightX} ${bottomY} L ${rightX - bracketWidth} ${bottomY}" />
                    </g>
                    <text x="${rightX + 4}" y="${topY}" font-size="${size * 0.18}" font-weight="900" fill="#4338ca" dominant-baseline="hanging" text-anchor="start">${charge}</text>
                `;
            }

            return `
                <svg width="${size}" height="${size}" viewBox="0 0 ${size} ${size}" style="overflow: visible;">
                    <text x="${effectiveCenter}" y="${effectiveCenter}" dominant-baseline="central" text-anchor="middle" font-size="${size*0.18 * scaleFactor}" font-weight="900" fill="#1e293b">${symbol}</text>
                    ${circles}
                    ${graphics}
                    ${bracketUI}
                </svg>`;
        }

        function renderOrbitalBoxes(el, mode = 'atom') {
            let html = '';
            const currentConfig = (mode === 'ion' && el.ionConfig.length > 0) ? el.ionConfig : el.config;
            let currentElec = currentConfig.reduce((a, b) => a + b, 0);

            const subshells = [
                { name: '1s', capacity: 2, type: 's' }, { name: '2s', capacity: 2, type: 's' },
                { name: '2p', capacity: 6, type: 'p' }, { name: '3s', capacity: 2, type: 's' },
                { name: '3p', capacity: 6, type: 'p' }, { name: '4s', capacity: 2, type: 's' },
                { name: '3d', capacity: 10, type: 'd' }
            ];

            subshells.forEach(sub => {
                if (currentElec <= 0) return;
                const occupancy = Math.min(currentElec, sub.capacity);
                currentElec -= occupancy;

                if (sub.type === 's') {
                    let arrows = occupancy >= 1 ? '↑' : ''; if (occupancy >= 2) arrows += '↓';
                    html += `<div class="flex flex-col items-center"><div class="orbital-box text-blue-600 font-bold border-blue-200">${arrows}</div><span class="text-[5px] font-black mt-0.5 text-slate-400">${sub.name}</span></div>`;
                } else if (sub.type === 'p') {
                    html += `<div class="flex gap-0.5">`;
                    for (let i = 0; i < 3; i++) {
                        let arrows = ''; if (occupancy > i) arrows += '↑'; if (occupancy > i + 3) arrows += '↓';
                        html += `<div class="flex flex-col items-center"><div class="orbital-box text-orange-500 font-bold border-orange-200">${arrows}</div><span class="text-[5px] font-black mt-0.5 text-slate-400">${sub.name}</span></div>`;
                    }
                    html += `</div>`;
                } else if (sub.type === 'd') {
                    html += `<div class="flex gap-0.5">`;
                    for (let i = 0; i < 5; i++) {
                        let arrows = ''; if (occupancy > i) arrows += '↑'; if (occupancy > i + 5) arrows += '↓';
                        html += `<div class="flex flex-col items-center"><div class="orbital-box text-purple-600 font-bold border-purple-200">${arrows}</div><span class="text-[5px] font-black mt-0.5 text-slate-400">${sub.name}</span></div>`;
                    }
                    html += `</div>`;
                }
            });
            return html;
        }

        function showPeriodTrend(p) {
            const container = document.getElementById('comparisonContainer');
            container.innerHTML = `<div class="w-full bg-slate-900 text-white p-4 rounded-lg min-h-[220px] flex flex-col justify-center">
                <h2 class="text-[11px] font-black mb-3 uppercase text-blue-400 tracking-widest">Across Period ${p}</h2>
                <div class="flex items-center justify-around mb-4">
                    <div class="text-center">${drawDotCross([2,8,1], 50, "Na")}<p class="text-[7px] mt-1 text-blue-300">Atomic Size: Large</p></div>
                    <div class="text-lg font-black text-slate-500">→</div>
                    <div class="text-center">${drawDotCross([2,8,7], 40, "Cl")}<p class="text-[7px] mt-1 text-blue-300">Atomic Size: Small</p></div>
                </div>
                <div class="space-y-2 text-[10px] leading-relaxed px-2 border-l-2 border-blue-500/30">
                    <p><strong class="text-blue-300">Core Logic:</strong> Protons increase (+ nuclear charge), pulling the same number of shells closer to the nucleus.</p>
                </div>
                <button onclick="updateUI()" class="mt-4 self-start text-[8px] bg-white/10 px-2 py-1 rounded hover:bg-white/20 transition-colors uppercase font-black">Back to Deck</button>
            </div>`;
        }

        function showGroupTrend(g) {
            const container = document.getElementById('comparisonContainer');
            container.innerHTML = `<div class="w-full bg-slate-800 text-white p-4 rounded-lg min-h-[220px] flex flex-col justify-center">
                <h2 class="text-[11px] font-black mb-3 uppercase text-orange-400 tracking-widest">Down Group ${g}</h2>
                <div class="flex flex-col items-center gap-2 mb-4">
                    ${drawDotCross([2,7], 35, "F")}
                    <div class="text-lg font-black text-slate-600 leading-none">↓</div>
                    ${drawDotCross([2,8,7], 55, "Cl")}
                </div>
                <div class="space-y-2 text-[10px] leading-relaxed px-2 border-l-2 border-orange-500/30">
                    <p><strong class="text-orange-300">Core Logic:</strong> Each step down adds a full electron shell, increasing shielding and atomic radius.</p>
                </div>
                <button onclick="updateUI()" class="mt-4 self-start text-[8px] bg-white/10 px-2 py-1 rounded hover:bg-white/20 transition-colors uppercase font-black">Back to Deck</button>
            </div>`;
        }

        window.onload = renderTable;
    </script>
</body>
</html>
